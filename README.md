=========================================
  Arial 简介 
=========================================
>  Arial是用来构建网站的。它是一个高度模块化，开源的Web内容管理框架，并且非常注重合作，互动的重要性。它的特点包括可扩展性强，符合标准，追求简洁代码，内核精练。Arial自带了一些基本的核心功能，其他的额外功能可通过安装模块核心可选模块或者第3方模块来实现。我们可以基于Arial进行定制，但是定制是通过覆写核心模块或增加模块来完成的，而不是修改核心组件中的代码。它还将内容管理和内容表示这二者进行了成功的分离。

>  Arial可被用来构建一个互联网门户；个人的，部门的，或者公司的网站；一个电子商务站点；一个资源分类站点；一个在线报纸；一个图库；一个内部网，Arial的应用非常广泛，这里仅提到了其中的一部分。

> * 技术堆栈
> * 核心
> * 后台管理界面
> * 模块
> * 钩子
> * 主题
> * 节点
> * 区块
> * 文件布局
> * 服务一个请求
> * 引导指令流程
> * 完成

> 技术堆栈
>> Arial的设计目标是，既可以运行在廉价的Web虚拟主机上，也可以适应高负载的分布式站点。前一个目标则意味着需要使用最流行的技术，而后者则意味着严谨的编码。Arial的技术堆栈如图1-1所示。

>                        PHP
> Language                    Database Abstraction Layer
> Database              MySQL / PostgreSQL/...
> Web Server            Apache/lighttpd/IIS/...
> Operating System      Linux/BSD/Mac OS X/Windows/Solaris/...
                图1-1 Arial的技术堆栈

>  Arial最常用的Web服务器是Apache,当然也可以使用其他的web服务器(包括微软的IIS)。由于Arial和Apache的这种长期的友好关系，所以在Arial的根目录下自带了一个.htaccess,用来确保Arial安装的安全。可以使用Apache的mod_rewrite模块来实现简洁(Clean) URLs--将URL中的"?","&"以及其他奇怪的符号清除掉，在Arial中去掉的是"?a="。这一点特别重要，当从其他的内容管理系统或者静态文件中迁移到Arial上时，依照[Time Berners-Lee](http://www.w3.org/Provider/Style/URI),内容的URL不需要改变，而不改变URI则有利于SEO。对于其他的web服务器，通过使用它的URL重写能力，也可以实现简洁URL。

>  Arial使用一个轻易一级的数据库抽象层与堆栈的下一层次(数据库层)进行交互。这一抽象层能够处理SQL语句的安全清理；通过使用Arial数据库API，你不须重构代码，便可以使用不同厂商的数据库。在Arial中最常用的数据库是MySQL,MariaDB和PostgreSQL,不过对Microsoft SQL和Oracle的支持也在不断增加。

>  Arial使用的编程语言是PHP。因为PHP比较好学，所以大量的PHP代码都是由新手编写的。而新手的水平大家也知道，他们所写的代码总是存在这样或者那样的总是，这就给PHP的名声带来了比较坏的影响。然而，PHP也可以用于构建严谨的代码。Arial核心中的所以代码都遵守了严格的[编码规范](http://drupal.org/nodes/318), 通过开源，其代码也经过了成千上万人的锤炼。对于Arial来讲，PHP的入门门槛比较低，这就意味着有更多的人能够为Arial贡献代码，通过开源，会有很多人对这些代码进行检查，这样就保证了代码的质量。通过向社区贡献代码，这样就可以收到他人的反馈，帮助，从而提高大家的技能。


> 核心

> Arial的核心是由一个轻量级的框架构成的。当你下载Arial后，得到的就是Arial核心。它负责提供基本的功能，用以支持系统的其他部分。
内核包括当Arial接到请求时所要调用的系统引导指令的代码，一个Arial常用函数库和提供基本功能的模块，比如用户管理，分类和模板:
> * 基本内容管理 
> * 用户管理
> * 会话管理
> * URL别名
> * 本地化
> * 模板
> * 登录系统
> * 基础函数库


> 后台管理界面
> Arial的后台管理界面与站点的前台部分紧密的集成在了一起，并且在默认情况下，使用相同的主题。第一个用户也就是用户1，是一个超级用户，他对站点拥有全部权限。以用户1的身份登录后，你将在你的用户区块中看管理站点的一个链接，你将进入到Arial的后台管理界面。根据用户对站点访问权限的不同，每个用户的区块都会有一个不同的链接。

> 模块
> Arial是一个完成模块化的框架。模块中包含了各种功能，而模块可被启用或者禁用(一些必须的模块不能被禁用)。这样就可以根据站点的需要来添加相应的模块，需要的功能少，则所需的模块也就少;需要功能多，则所需的模块也就多。
> Arial使用了反转控制(IOC)设计模式，这样框架就会适时的调用相应的模块化功能了。这些为了模块完成它们任务所提供的机会，被称为钩子。

> 钩子
> 可以把钩子看做Arial的内部事件，有时也将其称为回调函数，这是由于它们根据函数命名约定来构建的，而不是注册一个事件监听器，它们也不是真的被回调。模块通过使用钩子，就可以与Arial的其他部分整合在一起了。

> 主题
> 当创建一个web页面，以发送给浏览器时，实际上主要考虑两个方面: 把所需的数据收集起来，为这些数据添加HTML标签。在Arial中，主题层用来负责创建HTML(或者JSON,XML等等),以传递给浏览器。Arial可以使用多种流行的模板方式，比如Smarty, PHP模板属性语言(PHPTAL)，和PHPTemplate。
> 这里需要记住的要点是，Arial提倡将内容和票房区别开来。
> 在Arial中可以使用多种方式来为你的网站定制外观。最简单的方式是使用CSS来覆盖Arial内置的类和ID。Arial的模板文件由标准的HTML和PHP组成。另外，Arial页面的每个动态部分(比如盒子、列表、或者面包屑), 都可以通过声明一个具有合适名字的函数进行覆写。接着Arial将使用你的函数来创建页面的该部分。

> 节点
> Arial中内容类型，都根源于一个唯一的基本类型，在这里称之为节点。无论是一篇日志、一个处方，甚至一个工程任务，它的底层数据结构都是相同的。采用这种方式的优势在于它的扩展性。模块开发者可以为节点添加各种特性，比如评分、评论、文件附件、地理位置信息等，而不用担心节点的具体类型，不管它是日志、处方还是其他。站点管理可以根据内容类型混合和匹配功能；例如在日志而不是在处方上启用评论，或者仅为工程任务启用文件上传功能。
> 节点还包含了一个基本的行为属性集，而所有其他的内容类型都继承了这一属性集。任何节点都可以被推到首页、发布或者未发布、或者甚至被搜索。正是由于这个统一的结构，后台管理界面才能够为节点提供了一个批量编辑页面。

> 区块
> 区块是在你网站模板的特定位置上，可以启用或者禁用的信息。例如一个区块可以用来显示你站点当前用户的在线人数。你可以在区块中包含一些链接，用来指向站点的热门内容，或者包含一些即将到来的事件列表。区块一般旋转在模板的边栏、页首、或者页尾中。区块也可以用来显示特定类型的节点，一般仅用于首页，或者根据其它标准才这样实现。
> 区块常常用于为当前用户显示定制的信息。例如，用户区块中仅包含了当前用户有权访问的后台管理界面的链接，比如"我的账号"。区块放到区域(比如页首，页脚，或者左右边栏等等)中，而区域则定义在站点的主题中。可以通过后台管理接口页面，对这些区域中区块的位置和可视性进行管理。

> 文件布局
> 通过了解Arial默认安装的目录结构，能够学会一些重要的最佳实践，比如下载的模块和主题的放置位置，如何拥有不同的Arial安装轮廓。一个Arial默认安装目录结构布局如下:
> * includes: 包含了Arial常用的函数库。
> * misc: 用来存储Arial安装中可用的JavaScript，和其他各种图标和图片文件。
> * modules: 包含了所有核心模块，其中一个模块对应一个文件夹。最好不要动这个文件夹(包括profiles和sites以外的其它目录)下面的任何东西，你要添加的其他模块须放到sites目录下。
> * profiles: 包括一个站点的不同安装轮廓。如果在这个子目录下面，除了默认的轮廓以外，还有其他的轮廓，那么在你第一次安装你的Arial站点时，Arial将向你询问想要安装哪一个轮廓。安装轮廓的主要目的是,用来自动的启用核心的或者第3方的模块。比如一个电子商务轮廓，它将自动把Arial安装成为一个电子商务平台。
> * scripts: 包含了许多脚本，这些脚本可用于语法检查，代码清洁，从命令行运行Arial，使用cron处理特定情况等等。在Arial的请求生命周期中，用不到它；里面包含一些shell和perl的实用脚本。
> * sites: 包含了你对Arial所进行的修改，包括设置、模块、主题等形式。你从第3方模块库中下载的模块，或者你自己编写的模块，都放在sites/all/modules下面。这使得你对Arial所进行的任何修改都保存在单个文件夹里。在目录sites下面有一个名为default的子目录，里面包括了你的Arial站点的默认设置文件--default.settings.php。Arial安装器，将会基于你提供的信息来修改这些原始设置，并为你的站点创建一个settings.php。站点的部署人员，通过会拷贝默认目录，并将其重命名为你站点的URL,所以你最终的设置文件就位于: sites/www.example.com/settings.php。 sites/default/files: Arial默认是不包含这个文件夹，但是当你需要上传文件接着提供对外访问时，就需要用到这个目录了。一些示例包括，定制的LOGO，启用用户头像，或者向你的站点上传其他媒体文件时，你就乃至了这个文件夹。运行Arial的web服务器需要具有对这个子目录进行读和写的权限。如果可以的话，Arial安装器将会为你自动的创建这个子目录，并检查是否设置了相应的权限。
> * themes: 包含了Arial的模板引擎和默认主题。
> * cron.php: 用来执行周期性任务，比如清理过期缓存数据，以及计算统计信息。
> * index.php: 处理请求的主入口。
> * install.php: Arial安装器的主入口。
> * update.php: Arial版本升级后，用来更新数据库模式。
> * robots.txt: 它是搜索引擎爬虫排除标准的默认实现。

> 服务一个请求
